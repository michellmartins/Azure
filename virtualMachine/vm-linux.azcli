#Login no Azure

az login

# Parametros

rg= rg-vmlinux
local=brazilsouth
vm=vm-debian
user=azureuser
img=Debian11

# Criar Grupo de Recursos

az group create -n $rg -l $local

# Criar a imagem 

az vm create -g $rg  -n $vm --imagem $img --admin-username $user --generate-ssh-keys --pucblic-ip-sku Basic  

# Listar Vms do Azure

az vm list -g $rg

az vm list -o yaml

# Mostrar Detalhes da Vms

 az vm show -g $rg -n $vm -o yaml

 az vm show -g $rg -n $vm

# Obter IP Publico da Vms

ip=(az vm show -d -g $rg -n $vm --query pucblicIps -o tsv) 

# Instalar NGINX no Debian11

az vm run-command invoke -g $rg -n $vm --command-id RunShellScript --scripts "sudo apt update && sudo apt install -y nginx"

#Abrir porta 80

az vm open-port --port 80 -g $rg -b $vm

#curl 191.233.253.169

#Excluir o grupo de Recursos

az group delete -n $rg -y  

